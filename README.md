<div align="right">
	<img src="https://pixelsafari.neocities.org/dividers/bluestarribbon2.gif" width="50%">
			<img src="https://pixelsafari.neocities.org/dividers/bluestarribbon2.gif" width="49%">
		</div>
</div>


<h1 align="center">
·.★·.·´¯`·.·★ Beehind the Hood ★·.·´¯`·.·★.· 
</h1>

## --------------------------------------------------------------------------------------
<div align="center">
	Beehind the Hood es un pequeño juego plataformero inspirado en la estetica de una de mis novelas visuales favoritas y en juegos como Mario Bros.
</div>
<div align="center">
Las mecanicas del juego son simples, durante el primer nivel debes de navegar por el mapa hasta encontrar la llave que abrira otra parte del mapa donde deberas de encontrar la puerta para pasar al siguiente nivel, teniendo que saltar de plataforma en plataforma para seguir avanzando en los niveles, mientras recolectas monedas.
</div>

## --------------------------------------------------------------------------------------
<h2>
	<img src="https://i.pinimg.com/originals/99/f0/e0/99f0e02f90185be9fbfb46e62ddfa9f3.gif" width="5%">
	Integrante

</h2>

- **Sandra Carolina Perales Rodriguez** 

---

<h2>
	<img src="https://i.pinimg.com/originals/e4/96/0c/e4960c1d084132279f17ca869846c00c.gif" width="4%">
	Mecánicas del Juego

</h2>

 



<h3>
<img src="https://static.vecteezy.com/system/resources/previews/013/367/632/non_2x/pixel-art-wooden-box-crate-icon-for-8bit-game-on-white-background-vector.jpg" width="2.5%">
		 Plataformas
</h3>
		
- **Fijas:** Permanecen inmóviles y sirven como base estable para el jugador.
- **Oscilatorias Horizontales:** Se mueven horizontalmente entre dos puntos (de x +100 a x -100).
- **Oscilatorias Verticales:** Se mueven horizontalmente entre dos puntos (de y +100 a y -100).
- **Frágiles:** Desaparecen 0.5 segundos después de ser pisadas, obligando al jugador a moverse rápidamente.
- **De Rebote:** Impulsan al jugador hacia arriba al tocarlas, permitiendo alcanzar zonas elevadas.




<h3>
	<img src="https://i.pinimg.com/474x/1c/ae/f6/1caef605fedf1bfda4e23320ae4f7572.jpg" width="4%">
Personaje
</h3>

- **Movimiento básico:** El jugador puede desplazarse a la izquierda, derecha y saltar.
- **Gravedad:** Aplica caída natural; si el jugador cae fuera del escenario, el nivel se reinicia.
- **Velocidad de movimiento:** Aproximadamente 450.0 unidades por segundo.
- **Salto y doble salto:** Puede realizar hasta dos saltos consecutivos, con una fuerza de -450.
- **Reinicio de salto:** Al tocar el suelo, se restauran los saltos disponibles.
- **Interacción con plataformas y áreas:** El personaje puede activar zonas especiales como llaves, puertas o trampas.

### 🏆 Monedas
- **Recolectable:** Se recoge al tocarla y desaparece del mapa.
- **Marcador:** Se muestra un mensaje y se actualiza el contador indicando que una moneda ha sido recogida.

### 🗝️ Llave
- **Recolectable:** Se recoge al tocarla y desaparece del mapa.
- **Marcador:** Se muestra un mensaje y se actualiza el contador indicando que la llave ha sido recogida.
- **Desbloqueo:** Es necesaria para activar la puerta que permite avanzar al siguiente nivel.

### 🚪 Puerta 1
- **Condicional:** Solo se activa si el jugador ha recogido la llave de lo contrario muestra un mensaje.
- **Transición de nivel:** Al tocarla con la llave en posesión, se desbloquea una parte del mapa.
- 
### 🚪 Puerta 2
- **Condicional:** El personaje necesita entrar al área de la puerta.
- **Transición de nivel:** Al tocarla te llevara al segundo y ultimo nivel.
- 
### 🗺️ Niveles
- **Diseño:** Cada nivel está compuesto por plataformas, zonas de peligro, y solamente el nivel 1 cuenta con llaves y puertas.
- **Zona de daño:** Si el jugador cae en ella o toca una trampa, el nivel se reinicia automáticamente.
- **sistema de guardado:** Con la letra G puedes guardar la posición y la cantidad de monedas, y con la tecla C puedes volver a cargar para retomar donde lo dejaste.

---

## Assest 
### Fondos  
- Pixel Art Platformer - Village Props – Tilemap Nivel 1 y 2, y objetos. - link: [🔗](https://cainos.itch.io/pixel-art-platformer-village-props) -
<div>
  <img src="https://img.itch.zone/aW1hZ2UvMTAzNDU1MS83MTU0ODQyLnBuZw==/347x500/hNfWPv.png" width="40%"/>
	  <img src="https://img.itch.zone/aW1hZ2UvMTAzNDU1MS81OTA1MzQwLnBuZw==/347x500/1Hm1KO.png" width="40%"/>
<div>

----------------------------------------------------------------------------------------------

 - Legacy-Fantasy - High Forest 2.0 – Tilemap Nivel 1 y 2, y objetos. - link: [🔗](https://anokolisa.itch.io/sidescroller-pixelart-sprites-asset-pack-forest-16x16) -
<div>
  <img src="https://img.itch.zone/aW1hZ2UvMzk3MDM0LzEwNDE2ODc1LmdpZg==/original/%2Fv41b3.gif" width="40%"/>
	  <img src="https://img.itch.zone/aW1hZ2UvMzk3MDM0Lzk0MTg1NDQucG5n/original/wxjikK.png" width="40%"/>
<div>

----------------------------------------------------------------------------------------------

</div>
- Free Pixel Art Forest – Tilemap background Nivel 1. - link: [🔗](https://edermunizz.itch.io/free-pixel-art-forest) -
  <img src="https://img.itch.zone/aW1hZ2UvMTIxNjU4LzU2MDQxMC5wbmc=/original/hCUwLQ.png" width="70%"/>

----------------------------------------------------------------------------------------------

</div>
- Free Ocean and Clouds Pixel Backgrounds. - link: [🔗](https://free-game-assets.itch.io/ocean-and-clouds-free-pixel-art-backgrounds?download) -

  <img src="https://img.itch.zone/aW1hZ2UvMjIwMDg2Mi8xMzAxMDAzNC5wbmc=/347x500/yIJ%2FHA.png" width="70%"/>

----------------------------------------------------------------------------------------------

### Sprites  
- Red hood pixel character – link: [🔗](https://legnops.itch.io/red-hood-character) -

<div>
  <img src="https://img.itch.zone/aW1hZ2UvNzkxODcyLzQ0MzM1ODcuZ2lm/347x500/0yT4eo.gif" width="40%"/>
</div>

----------------------------------------------------------------------------------------------

- Puerta -
<a href="https://imgbb.com/">
<img src="https://i.ibb.co/dJ3wnfCL/Door.png" alt="Door" border="0">
</a>

----------------------------------------------------------------------------------------------


- llaves y objectos -
<a href="https://imgbb.com/">
<img src="https://i.ibb.co/jZrHGMwh/PS-Items.png" alt="PS-Items" border="0">
</a>

----------------------------------------------------------------------------------------------



## Videos
Video 1: https://youtu.be/Ro6GAGUtdpc
Video 2: https://youtu.be/DpHbCdKw-Zc

(una nutridisculpa es que el formato del video no me dejo subirlo de otra manera)
----------------------------------------------------------------------------------------------


----------------------------------------------------------------------------------------------
---

## 💻 Códigos 

  <details>
  <summary>Personaje</summary>

## Variables y Constantes para el Personaje
extends CharacterBody2D

const SPEED = 450.0
const JUMP_VELOCITY = -450.0
const MAX_JUMPS = 2
var has_key: bool = false
@onready var animated_sprite = $AnimatedSprite
@export var next_level_scene: String = ""
var is_facing_right = true
var jumps = 0
var monedas := 0
@onready var label_monedas: Label = $Camera2D/ui/MonedaNum
@onready var animationPlayer = $AnimationPlayer
@onready var sprite = $Sprite2D
@onready var detector = $Detector

func _ready():
	add_to_group("personaje")
	


func _physics_process(delta: float) -> void:
	update_animations()
	flip()
	# Agregar gravedad si no estamos en el suelo
	if not is_on_floor():
		velocity += get_gravity() * delta
	else:
		# Reiniciar los saltos al tocar el suelo
		jumps = 0

	# Manejo de salto (hasta dos saltos)
	if Input.is_action_just_pressed("ui_accept") and jumps < MAX_JUMPS:
		velocity.y = JUMP_VELOCITY
		jumps += 1

	# Movimiento horizontal
	var direction := Input.get_axis("ui_left", "ui_right")
	if direction:
		velocity.x = direction * SPEED
	else:
		velocity.x = move_toward(velocity.x, 0, SPEED)
	move_and_slide()

	if Input.is_action_pressed("guardar"):
		guardar_datos()
	if Input.is_action_pressed("cargar"):
		cargar_datos()


func flip():
	if (is_facing_right and velocity.x < 0) or (not is_facing_right and velocity.x > 0):
		scale.x *= -1
		is_facing_right = not is_facing_right
		


#animaciones
func update_animations():
	if not is_on_floor(): 
		if velocity.y < 0:
				animated_sprite.play("jump")
		else:
			animated_sprite.play("fall")
		return

	if velocity.x: 
		animated_sprite.play("run")
	else:
		animated_sprite.play("idle")


func agregar_moneda():
	monedas += 1
	label_monedas.text = str(monedas)
	
func total_mon():
	$Camera2D/ui/Total_monedas.text = "Monedas obtenidas:" % monedas
	


func guardar_datos():
	
	var datos = {
		"personaje": {
			"monedas": monedas,
			"posicion": {
				"x": "%.8f" % global_position.x,
				"y": "%.8f" % global_position.y
			}			
		}
	}
	#Código para guardar JSON
	var json_texto = JSON.stringify(datos, "\t")
	var archivo = FileAccess.open("res://extra/datos/juego_guardado.json",FileAccess.WRITE)
	archivo.store_string(json_texto)
	archivo.close()
	print("Todo salió bien, archivo guardado")
	
	
func cargar_datos():
	
	if not FileAccess.file_exists("res://extra/datos/juego_guardado.json"):
		print("No hay archivo")
		return
		
	var archivo = FileAccess.open("res://extra/datos/juego_guardado.json",FileAccess.READ)
	var json_caracter = archivo.get_as_text()
	archivo.close()
	
	var json = JSON.new()
	var error = json.parse(json_caracter)
	if error != OK:
		print("No se parseó", json.get_error_message())
	
	var datos = json.get_data()
	
	global_position = Vector2(		
		float(datos["personaje"]["posicion"]["x"]),
		float(datos["personaje"]["posicion"]["y"])
	)
	
	monedas = datos["personaje"]["monedas"]

</details>

<details>
  <summary>Plataformas</summary>
	
extends Area2D
 
#variables
enum type_plat {FIJA, OSCILATORIAH, OSCILATORIAV, FRAGIL, REBOTE, REINICIO}
@export var type: type_plat = type_plat.FIJA;
@export var rebote := 2.0 

func _ready():
	act_plat()
	monitorable = true
	monitoring = true
 
 #cambiar de plataforma segun su tipo
  func act_plat():
	match type:
		type_plat.FIJA:
			$Sprite2D.modulate
		type_plat.OSCILATORIAH:
			$Sprite2D.modulate
			oscilarh()
		type_plat.FRAGIL:
			$Sprite2D.modulate
			
		type_plat.REBOTE:
			$Sprite2D.modulate
			
		type_plat.REINICIO:
			$Sprite2D.modulate = Color.RED
			
		type_plat.OSCILATORIAV:
			$Sprite2D.modulate
			oscilarv()

    #señal
    func _on_body_entered(body: Node2D) -> void:
	    if body.is_in_group("personaje"):
	    	match type:
		  	type_plat.FRAGIL:
		  			await get_tree().create_timer(0.25).timeout
			  		queue_free()
		  	type_plat.REBOTE:
		  		if body.has_method("puede_rebotar"):
			  		body.puede_rebotar(rebote)
		  		else:
			  		body.velocity.y = body.JUMP_VELOCITY * rebote
	  		type_plat.REINICIO:
			  		get_tree().reload_current_scene()



#funcion para oscilar horizontalmente
func oscilarh():
	var tween = create_tween()
	tween.tween_property(self, "position:x", position.x+100, 2)
	tween.tween_property(self, "position:x", position.x-100, 2)
	tween.set_loops()

#funcion para oscilar verticalmente

func oscilarv():
	var tween = create_tween()
	tween.tween_property(self, "position:y", position.y+100, 2)
	tween.tween_property(self, "position:y", position.y-100, 2)
	tween.set_loops()


</details>
<details>
  <summary>Llave</summary>
	
	extends Area2D

## Crear una señal para detectar si se ha recogido la llave o no
	signal puerta_llave


## Recibe la señal de que la llave ha sido recogida

	func _on_body_entered(body: Node2D) -> void:
		if body.get_name() == "personaje":
			emit_signal("puerta_llave")
			queue_free()

 </details>
 
<details>
  <summary>Puerta</summary>

	extends Node2D

## Variables que indica que la llave no ha sido recogida al iniciar el juego

    var llave = false

    @onready var ui_label = $"../door/Label"

    func _ready() -> void:
    	upgrade_ui()


## La puerta detecta si se ha recogido la llave o no, para determinar si dejarlo avanzar o mostrar un mensaje

 func _on_area_2d_body_entered(body: Node2D) -> void:
	if body.is_in_group("personaje") and llave == true:
			queue_free()
			
	elif body.is_in_group("personaje") and llave == false:
		ui_label.text = "Necesitas la llave para abrir la puerta"
		await get_tree().create_timer(0.6).timeout
		upgrade_ui()

## Marcador visible que indica si la llave se recogio o no.

	func _on_llave_puerta_llave() -> void:
		llave = true
		upgrade_ui()

	
	func upgrade_ui() -> void:
		if llave == true:
			ui_label.text = "Llaves: 1"
		
		await get_tree().create_timer(0.5).timeout
	
	else:
		ui_label.text = "Llaves: 0"
	
 </details>
 
 <details>
  <summary>Área de Daño</summary>

	 extends Area2D

 ## Variables y crear un área de daño que reinicie al personaje

	enum type_plat {FIJA, RESET}
	@export var type: type_plat = type_plat.FIJA;
	@export var rebote := 2.0 


	func _ready():
		act_plat()
		monitorable = true
		monitoring = true
	
 ## Colocando el "sprite" apesar que no le asigno ninguno desde el principio pues son solo collision shapes
	func act_plat():
		match type:
			type_plat.FIJA:
				$Sprite2D.modulate

		type_plat.RESET:
			$Sprite2D.modulate = Color.RED

 ## Detecta si el personaje ha entrado a la zona 2D y si es del tipo reset, reinicia el nivel.
	func _on_body_entered(body: Node2D) -> void:
		if body.is_in_group("personaje"):
			match type:
				type_plat.RESET:
					get_tree().reload_current_scene()
 </details>

 <details>
  <summary>Puerta de cambio de nivel</summary>

    extends Node2D

    #señal de que el personaje entro a la puerta haciendo que pase al sig nivel 
    func _on_area_2d_body_entered(body: Node2D) -> void:
  		if body.is_in_group("personaje"):
		  	get_tree().change_scene_to_file("res://Scenes/levels/Level2.tscn")
			

 </details>


 <div align="center">
  <img src="https://i.pinimg.com/originals/3d/f0/1c/3df01c6b1798d403648a281195d87a41.gif" width="40%"/>
</div>


 ## Conclusión
Mi experiencia a la hora de crear este juego fue bastante caotica pues godot no es una herramienta que manejo al 100%, además de, que en varias ocasiones se me llego a cerrar el programa sin haber guardado mi progreso lo que provoco que me frustrara un poco y que se haya atrasado mi avance, en lo personal siento que lo pude haber hecho mejor pero mi lap no quiso cooperar.
 <div align="center">
  <img src="https://media.tenor.com/hGQZUS8D3fQAAAAM/flug-little-aliens-forever.gif" width="40%"/>
</div>
